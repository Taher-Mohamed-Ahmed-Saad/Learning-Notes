{"version":3,"sources":["../../server/body-streams.ts"],"names":["requestToBodyStream","bodyStreamToNodeStream","clonableBodyForRequest","request","transform","Primitives","TransformStream","start","controller","on","chunk","enqueue","terminate","err","error","readable","bodyStream","reader","getReader","Readable","from","done","value","read","replaceRequestBody","base","stream","key","v","bind","incomingMessage","bufferedBodyStream","endPromise","Promise","resolve","reject","finalize","cloneBodyStream","originalStream","stream1","stream2","tee"],"mappings":"AAAA;;;;QASgBA,mBAAmB,GAAnBA,mBAAmB;QAYnBC,sBAAsB,GAAtBA,sBAAsB;QAkCtBC,sBAAsB,GAAtBA,sBAAsB;AAvDf,IAAA,WAA6C,kCAA7C,6CAA6C,EAAA;AAE3C,IAAA,OAAQ,WAAR,QAAQ,CAAA;;;;;;AAO1B,SAASF,mBAAmB,CAACG,OAAwB,EAAc;IACxE,MAAMC,SAAS,GAAG,IAAIC,WAAU,QAAA,CAACC,eAAe,CAAyB;QACvEC,KAAK,EAACC,UAAU,EAAE;YAChBL,OAAO,CAACM,EAAE,CAAC,MAAM,EAAE,CAACC,KAAK,GAAKF,UAAU,CAACG,OAAO,CAACD,KAAK,CAAC,CAAC;YACxDP,OAAO,CAACM,EAAE,CAAC,KAAK,EAAE,IAAMD,UAAU,CAACI,SAAS,EAAE,CAAC;YAC/CT,OAAO,CAACM,EAAE,CAAC,OAAO,EAAE,CAACI,GAAG,GAAKL,UAAU,CAACM,KAAK,CAACD,GAAG,CAAC,CAAC;SACpD;KACF,CAAC;IAEF,OAAOT,SAAS,CAACW,QAAQ,CAAyC;CACnE;AAEM,SAASd,sBAAsB,CAACe,UAAsB,EAAY;IACvE,MAAMC,MAAM,GAAGD,UAAU,CAACE,SAAS,EAAE;IACrC,OAAOC,OAAQ,SAAA,CAACC,IAAI,CAClB,AAAC,kBAAmB;QAClB,MAAO,IAAI,CAAE;YACX,MAAM,EAAEC,IAAI,CAAA,EAAEC,KAAK,CAAA,EAAE,GAAG,MAAML,MAAM,CAACM,IAAI,EAAE;YAC3C,IAAIF,IAAI,EAAE;gBACR,OAAM;aACP;YACD,MAAMC,KAAK;SACZ;KACF,EAAG,CACL,CAAA;CACF;AAED,SAASE,kBAAkB,CACzBC,IAAO,EACPC,MAAgB,EACb;IACH,IAAK,MAAMC,GAAG,IAAID,MAAM,CAAE;QACxB,IAAIE,CAAC,GAAGF,MAAM,CAACC,GAAG,CAAmB,AAAO;QAC5C,IAAI,OAAOC,CAAC,KAAK,UAAU,EAAE;YAC3BA,CAAC,GAAGA,CAAC,CAACC,IAAI,CAACJ,IAAI,CAAC;SACjB;QACDA,IAAI,CAACE,GAAG,CAAY,GAAGC,CAAC;KACzB;IAED,OAAOH,IAAI,CAAA;CACZ;AAMM,SAASvB,sBAAsB,CACpC4B,eAAkB,EAClB;IACA,IAAIC,kBAAkB,GAAsB,IAAI;IAEhD,MAAMC,UAAU,GAAG,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,GAAK;QAClDL,eAAe,CAACrB,EAAE,CAAC,KAAK,EAAEyB,OAAO,CAAC;QAClCJ,eAAe,CAACrB,EAAE,CAAC,OAAO,EAAE0B,MAAM,CAAC;KACpC,CAAC;IAEF,OAAO;QACL;;;;OAIG,CACH,MAAMC,QAAQ,IAAkB;YAC9B,IAAIL,kBAAkB,EAAE;gBACtB,MAAMC,UAAU;gBAChBR,kBAAkB,CAChBM,eAAe,EACf7B,sBAAsB,CAAC8B,kBAAkB,CAAC,CAC3C;aACF;SACF;QACD;;;OAGG,CACHM,eAAe,IAAe;YAC5B,MAAMC,cAAc,GAClBP,kBAAkB,WAAlBA,kBAAkB,GAAI/B,mBAAmB,CAAC8B,eAAe,CAAC;YAC5D,MAAM,CAACS,OAAO,EAAEC,OAAO,CAAC,GAAGF,cAAc,CAACG,GAAG,EAAE;YAC/CV,kBAAkB,GAAGQ,OAAO;YAC5B,OAAOC,OAAO,CAAA;SACf;KACF,CAAA;CACF"}