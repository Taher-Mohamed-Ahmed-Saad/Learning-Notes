{"version":3,"sources":["../../../../build/webpack/plugins/middleware-plugin.ts"],"names":["handleWebpackExtenalForEdgeRuntime","MiddlewarePlugin","constructor","dev","apply","compiler","hooks","compilation","tap","NAME","params","normalModuleFactory","codeAnalyzer","getCodeAnalizer","parser","for","metadataByEntry","Map","afterOptimizeModules","getExtractMetadata","processAssets","name","stage","webpack","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS","getCreateAssets","middlewareManifest","sortedMiddleware","middleware","functions","version","request","contextInfo","issuerLayer","isNodeJsModule","wp","handleWrapExpression","expr","isInMiddlewareLayer","ConstDependency","dependencies","dep1","range","loc","state","module","addPresentationalDependency","dep2","handleExpression","handleWrapWasmCompileExpression","handleWrapWasmInstantiateExpression","optimize","InnerGraph","onUsage","used","buildInfo","getModuleBuildInfo","usingIndirectEval","Set","Array","from","addUsedEnvVar","envVarName","nextUsedEnvVars","undefined","add","handleCallMemberChain","_","members","length","handleNewResponseExpression","node","firstParameter","arguments","isInMiddlewareFile","isNullLiteral","isUndefinedIdentifier","error","buildWebpackError","message","start","line","warnings","push","errors","handleImport","source","value","importLocByPath","importedModule","toString","set","sourcePosition","identifier","sourceContent","skip","prefix","expression","call","new","callMemberChain","expressionMemberChain","importCall","import","declarator","init","type","isProcessEnvMemberExpression","id","property","properties","key","registerUnsupportedApiHooks","clear","entryName","entryData","entries","options","runtime","EDGE_RUNTIME_WEBPACK","moduleGraph","entryModules","addEntriesFromDependency","dependency","getModule","forEach","includeDependencies","entryMetadata","env","wasmBindings","entryModule","isUsingIndirectEvalAndUsedByExports","util","getEntryRuntime","test","join","nextEdgeSSR","edgeSSR","nextEdgeMiddleware","edgeMiddleware","nextEdgeApiFunction","edgeApiFunction","envName","nextWasmMiddlewareBinding","conn","getOutgoingConnections","args","exportsInfo","getExportsInfo","exportName","getUsed","UsageState","Unused","assets","entrypoint","entrypoints","values","metadata","get","page","namedRegex","getNamedMiddlewareRegex","catchAll","regexp","matcherRegexp","edgeFunctionDefinition","files","getEntryFiles","getFiles","wasm","getSortedRoutes","Object","keys","MIDDLEWARE_MANIFEST","sources","RawSource","JSON","stringify","entryFiles","meta","isServerComponent","FLIGHT_MANIFEST","filter","file","startsWith","endsWith","map","replace","NEXT_CLIENT_SSR_ENTRY_SUFFIX","MIDDLEWARE_BUILD_MANIFEST","MIDDLEWARE_REACT_LOADABLE_MANIFEST","EDGE_UNSUPPORTED_NODE_APIS","warnForUnsupportedApi","buildUnsupportedApiError","apiName","warnForUnsupportedProcessApi","callee","rest","WebpackError","current","layer","rawRequest","memberExpression","object","moduleName","require","builtinModules","includes"],"mappings":"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"}